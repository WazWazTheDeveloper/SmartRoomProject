[{ekka,
     [{cluster_discovery,{manual,[]}},
      {proto_dist,inet_tcp},
      {cluster_name,emqxcl}]},
 {system_monitor,
     [{db_name,"postgres"},
      {db_password,<<"system_monitor_password">>},
      {db_username,"system_monitor"},
      {db_port,5432},
      {db_hostname,[]},
      {top_max_procs,1000000},
      {top_sample_interval,2000},
      {top_num_items,10}]},
 {gen_rpc,
     [{insecure_auth_fallback_allowed,true},
      {socket_buffer,1048576},
      {socket_recbuf,1048576},
      {socket_sndbuf,1048576},
      {socket_keepalive_count,9},
      {socket_keepalive_interval,75},
      {socket_keepalive_idle,900},
      {call_receive_timeout,15000},
      {authentication_timeout,5000},
      {send_timeout,5000},
      {connect_timeout,5000},
      {ssl_server_port,5369},
      {tcp_server_port,5369},
      {port_discovery,stateless},
      {max_batch_size,256},
      {driver,tcp}]},
 {mria,
     [{cluster_autoheal,true},
      {cluster_autoclean,86400000},
      {core_nodes,[]},
      {shard_transport,gen_rpc},
      {tlog_push_mode,async},
      {rlog_rpc_module,gen_rpc},
      {node_role,core},
      {db_backend,mnesia}]},
 {emqx_machine,
     [{custom_shard_transports,#{}},
      {applications,[]},
      {backtrace_depth,23},
      {global_gc_interval,900000}]},
 {emqx,
     [{data_dir,"data"},
      {cluster_hocon_file,"data/configs/cluster.hocon"},
      {local_override_conf_file,"data/configs/local-override.conf"},
      {cluster_override_conf_file,"data/configs/cluster-override.conf"},
      {config_files,["./etc/emqx.conf"]}]},
 {kernel,
     [{error_logger,silent},
      {logger,
          [{handler,default,logger_disk_log_h,
               #{config =>
                     #{burst_limit_enable => true,
                       burst_limit_max_count => 10000,
                       burst_limit_window_time => 1000,drop_mode_qlen => 3000,
                       file => "./log/emqx.log",flush_qlen => 8000,
                       max_no_bytes => 52428800,max_no_files => 10,
                       overload_kill_enable => true,
                       overload_kill_mem_size => 31457280,
                       overload_kill_qlen => 20000,
                       overload_kill_restart_after => 5000,
                       sync_mode_qlen => 100,type => wrap},
                 filesync_repeat_interval => no_repeat,
                 filters =>
                     [{drop_progress_reports,
                          {fun logger_filters:progress/2,stop}}],
                 formatter =>
                     {emqx_logger_textfmt,
                         #{chars_limit => unlimited,depth => 100,
                           single_line => true,
                           template => [time," [",level,"] ",msg,"\n"],
                           time_offset => []}},
                 level => warning}}]},
      {logger_level,warning}]},
 {prometheus,
     [{vm_msacc_collector_metrics,all},
      {vm_memory_collector_metrics,all},
      {vm_system_info_collector_metrics,all},
      {vm_statistics_collector_metrics,all},
      {mnesia_collector_metrics,all},
      {vm_dist_collector_metrics,[]}]}].
