(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38e26fa8"],{"0d47":function(e,t,n){"use strict";var r=n("f3f3"),o=(n("b0c0"),n("7a23")),a=n("9ee5");const c=Object(o["defineComponent"])({name:"ArrowLeft"}),i={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},u=Object(o["createElementVNode"])("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),l=[u];function s(e,t,n,r,a,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",i,l)}var d=Object(a["a"])(c,[["render",s]]),f=n("6c02"),p=Object(o["defineComponent"])({name:"DetailHeader"}),g=Object(o["defineComponent"])(Object(r["a"])(Object(r["a"])({},p),{},{props:{item:{required:!0,type:Object}},setup:function(e){var t=e,n=Object(f["f"])(),r=function(){var e=t.item,r=e.routeName,o=e.path,a=e.backFunc,c=e.route;c?n.push(c):o?n.push({path:o}):r?n.push({name:r}):a&&a()};return function(t,n){var a=Object(o["resolveComponent"])("el-page-header");return Object(o["openBlock"])(),Object(o["createBlock"])(a,{class:"detail-header",icon:Object(o["unref"])(d),content:e.item.name,onBack:r},Object(o["createSlots"])({_:2},[t.$slots.content?{name:"content",fn:Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(t.$slots,"content")]}))}:void 0]),1032,["icon","content"])}}}));n("de52");const b=g;t["a"]=b},1280:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"log-trace-detail app-wrapper"},a=["element-loading-text"],c={class:"default-node-tip tip"};function i(e,t,n,i,u,l){var s=Object(r["resolveComponent"])("detail-header"),d=Object(r["resolveComponent"])("el-option"),f=Object(r["resolveComponent"])("el-select"),p=Object(r["resolveComponent"])("el-col"),g=Object(r["resolveComponent"])("el-button"),b=Object(r["resolveComponent"])("el-row"),m=Object(r["resolveComponent"])("monaco"),v=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createVNode"])(s,{item:{name:e.viewLogName,path:"/log-trace"}},null,8,["item"]),Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{"element-loading-text":e.nextPageLoading},[Object(r["createVNode"])(b,{gutter:30},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{span:6},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.selectedNode,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedNode=t})},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.nodeOpts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{value:e.node,key:e.node},null,8,["value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{span:4},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{class:"dialog-primary-btn",type:"primary",onClick:t[1]||(t[1]=function(t){return e.download()}),loading:e.isDownloading,disabled:e.viewNodeLoading},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("Base.download")),1)]})),_:1},8,["loading","disabled"])]})),_:1})]})),_:1}),Object(r["createElementVNode"])("p",c,Object(r["toDisplayString"])(e.tl("defaultNodeTip")),1),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])({height:e.initialHeight+"px"}),class:"viewer-container",ref:"monacoContainer"},[Object(r["createVNode"])(m,{id:"log-trace",modelValue:e.logContent,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.logContent=t}),"scroll-loading":!0,"scroll-func":e.scrollLoadFunc,lang:"powershell",disabled:!0},null,8,["modelValue","scroll-func"])],4)]})),_:1})],8,a)),[[v,e.viewNodeLoading]])])}var u=n("c964"),l=(n("96cf"),n("4e82"),n("47e2")),s=n("9146"),d=n("0d47"),f=n("6c02"),p=n("457f"),g=n("3ef4"),b=0,m=0,v=5242880,j=51200,h=Object(r["defineComponent"])({components:{Monaco:s["a"],DetailHeader:d["a"]},setup:function(){var e=Object(l["b"])(),t=e.t,n=Object(f["e"])(),o=Object(r["ref"])(),a=Object(r["ref"])(300),c=Object(r["ref"])(""),i=Object(r["ref"])(!1),s=Object(r["ref"])([]),d=Object(r["ref"])(""),h=n.params.id,O=Object(r["ref"])(""),w=Object(r["ref"])(!1),k=function(){var e,t,n=((null===(e=o.value)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.top)||250)+30,r=window.innerHeight;a.value=r-n},y=function(e){return e.sort((function(e,t){return t.mtime-e.mtime}))},C=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["h"])(h);case 3:t=e.sent,s.value=y(t),d.value=s.value[0].node,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],i.value=!0,b=0,m=0,c.value="",O.value="",t){e.next=9;break}return e.next=9,C();case 9:return e.next=11,R(h);case 11:i.value=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n.scrollTop+a.value>=n.scrollHeight&&n.scrollTopChanged&&n.scrollTop>=m)){e.next=11;break}if(!(b<=v)){e.next=10;break}return m=n.scrollTop,i.value=!0,O.value=t("LogTrace.loadNextPage"),e.next=7,R(h);case 7:i.value=!1,e.next=11;break;case 10:g["a"].warning(t("LogTrace.tooLargeLog"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={position:b,bytes:j,node:d.value},e.prev=1,e.next=4,Object(p["j"])(t,n);case 4:r=e.sent,r&&r.items&&(o=r.meta,c.value+=r.items,b=null!==o&&void 0!==o&&o.position?o.position:b+j),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,w.value=!0,e.next=4,Object(p["f"])(h,d.value);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:return e.prev=8,w.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,6,8,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])((function(){k(),x()})),Object(r["watch"])((function(){return d.value}),(function(e,t){e!==t&&t&&x(!0)})),{tl:function(e){return t("LogTrace."+e)},monacoContainer:o,initialHeight:a,download:N,logContent:c,scrollLoadFunc:_,nodeOpts:s,selectedNode:d,viewDetail:x,viewNodeLoading:i,isDownloading:w,nextPageLoading:O,viewLogName:h}}}),O=(n("1d27"),n("6b0d")),w=n.n(O);const k=w()(h,[["render",i],["__scopeId","data-v-2afb57c1"]]);t["default"]=k},"1d27":function(e,t,n){"use strict";n("6fef")},"1f75":function(e,t,n){"use strict";var r=n("c964"),o=(n("96cf"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("caad"),n("2532"),n("ac1f"),n("00b4"),n("99af"),n("25f0"),n("bc3a")),a=n.n(o),c=n("2295"),i=n("f3f3"),u=(n("a9e3"),n("b6802"),n("159b"),n("3ef4")),l=n("e466"),s=n("2ef0"),d=n.n(s),f=25,p=function(e){var t=1e3*Number((e.length/f).toFixed(3));return t<3e3?3e3:t>8e3?8e3:t},g=function(e){var t=!e||Object(s["isString"])(e)||Object(s["isFunction"])(e)?{message:e}:e;return t},b=function(e){var t=g(e),n=t.message,r=t.duration,o=t.showClose,a=t.type,c=r||n&&p(n)||void 0,l=o||"error"===a;return Object(u["a"])(Object(i["a"])(Object(i["a"])({},e),{},{duration:c,showClose:l}))};l["d"].forEach((function(e){b[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=g(t);return b(Object(i["a"])(Object(i["a"])({},n),{},{type:e}))}}));var m=b,v=n("323e"),j=n.n(v),h=(n("a5d8"),n("afbc")),O=n("0613"),w=n("2fc2"),k="BAD_TOKEN",y="TOKEN_TIME_OUT",C="BAD_USERNAME_OR_PWD",x=n("88c3");j.a.configure({showSpinner:!1,trickleSpeed:200});var _=new Set,R=function(){return _=new Set};Object.assign(a.a.defaults,{baseURL:"api/v5",timeout:2e4}),a.a.interceptors.request.use((function(e){var t=O["a"].state.user;return e.headers={Authorization:"Bearer "+t.token},e}),(function(e){Promise.reject(e)})),a.a.interceptors.request.use(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.doNotTriggerProgress){e.next=4;break}return O["a"].state.request_queue||j.a.start(),e.next=4,O["a"].dispatch("SET_REQ_CHANGE",!0);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var N=function(e,t){return 401===e&&[k,y].includes(t.code)};function S(){return B.apply(this,arguments)}function B(){return B=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O["a"].dispatch("SET_REQ_CHANGE",!1);case 2:t=O["a"].state.request_queue,t>0?j.a.inc():j.a.done();case 4:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}a.a.interceptors.response.use((function(e){return e.config.doNotTriggerProgress||S(),/\/trace\/.+\/download/.test(e.config.url)?e:e.data||e.status}),(function(e){if(e.config.doNotTriggerProgress||S(),e.response){var t=e.response,n=t.data,r=t.status;if(!_.has(r)){var o;_.add(r);var a=401===r&&O["a"].state.afterCurrentUserPwdChanged;if(N(r,n))return a?O["a"].commit("SET_AFTER_CURRENT_USER_PWD_CHANGED",!1):c["a"].error(x["a"].global.t("Base.tokenExpiredMsg")),Object(h["c"])(),window.setTimeout(R,1e3),Promise.reject(e);var i=(null===(o=e.config)||void 0===o?void 0:o.errorsHandleCustom)&&Array.isArray(e.config.errorsHandleCustom)&&e.config.errorsHandleCustom.includes(r);if(!i)if((null===n||void 0===n?void 0:n.code)===C)c["a"].error(x["a"].global.t("Base.namePwdError"));else if(null!==n&&void 0!==n&&n.code||null!==n&&void 0!==n&&n.message){var u,l,s;m.error("".concat(r," ").concat(null!==(u=null===n||void 0===n?void 0:n.code)&&void 0!==u?u:"",": ").concat(null!==(l=null===n||void 0===n||null===(s=n.message)||void 0===s?void 0:s.toString())&&void 0!==l?l:""))}else m.error(r+" Network error");401===r&&Object(h["c"])()}}else{var f=e.code===w["C"]&&e.config.handleTimeoutSelf;_.has(0)||(f||m.error(x["a"].global.t("Base.networkError")),_.add(0))}return 0===O["a"].state.request_queue&&(_=new Set),d.a.throttle(R,2e3,{trailing:!1}),Promise.reject(e)}));t["a"]=a.a},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"457f":function(e,t,n){"use strict";n.d(t,"k",(function(){return l})),n.d(t,"o",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"l",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"j",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"n",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"g",(function(){return w})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return y})),n.d(t,"m",(function(){return C}));var r=n("c964"),o=(n("96cf"),n("d3b7"),n("1f75")),a=n("4c61"),c=n("2fc2"),i=n("3ef4"),u=n("88c3"),l=function(){return o["a"].get("/slow_subscriptions/settings")},s=function(e){return o["a"].put("/slow_subscriptions/settings",e)},d=function(){return o["a"].delete("/slow_subscriptions")},f=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].get("/slow_subscriptions",{params:{limit:1e3,page:1}});case 3:return t=e.sent,n=t.data,r=void 0===n?[]:n,e.abrupt("return",Promise.resolve(r));case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();function p(){return o["a"].get("/trace")}function g(e){return o["a"].post("/trace",e)}function b(e){return o["a"].get("/trace/".concat(e,"/log_detail"))}function m(e,t){return e?o["a"].get("/trace/".concat(encodeURIComponent(e),"/log"),{params:t}):Promise.reject()}function v(e,t){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].get("/trace/".concat(encodeURIComponent(t),"/download"),{params:{node:n},responseType:"blob",timeout:45e3,handleTimeoutSelf:!0});case 3:return r=e.sent,Object(a["m"])(r),e.abrupt("return",Promise.resolve());case 8:return e.prev=8,e.t0=e["catch"](0),e.t0.code===c["C"]&&i["a"].error(Object(u["b"])("LogTrace.logTraceDownloadTimeout")),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),j.apply(this,arguments)}function h(e){return o["a"].put("/trace/".concat(encodeURIComponent(e),"/stop"))}function O(e){return o["a"].delete("/trace/".concat(encodeURIComponent(e)))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?o["a"].get("/mqtt/topic_metrics"):o["a"].get("/mqtt/topic_metrics/"+encodeURIComponent(e))}function k(e){var t={topic:e};return o["a"].post("/mqtt/topic_metrics",t)}function y(e){if(null!=e)return o["a"].delete("/mqtt/topic_metrics/"+encodeURIComponent(e))}function C(e){if(null!=e)return o["a"].put("/mqtt/topic_metrics",{action:"reset",topic:e})}},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},"6fef":function(e,t,n){},9146:function(e,t,n){"use strict";var r=n("c964"),o=(n("96cf"),n("7a23")),a=n("c2c6"),c=n("5502"),i=n("fbb3"),u=["id"],l=Object(o["defineComponent"])({name:"Monaco"}),s=Object.assign(l,{props:{id:{type:String,required:!0},modelValue:{type:String},lang:{type:String,required:!0},disabled:{type:Boolean,default:!1},hoverProvider:{type:Object},completionProvider:{type:Object},scrollLoading:{type:Boolean,default:!1},scrollFunc:{type:Function,default:function(){return function(){return{}}}},decorationFunc:{type:Function},jsonWithoutValidate:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur","change"],setup:function(e,t){var n=t.emit,l=e,s=Object(c["b"])(),d=Object(o["computed"])((function(){return s.state.theme})),f=null,p=function(){"json"===l.lang&&a["languages"].json.jsonDefaults.setDiagnosticsOptions({validate:!l.jsonWithoutValidate})},g=function(){switch(d.value){case"dark":return"editor-dark";default:return"vs"}},b=function(){var e=i;a["editor"].defineTheme("editor-dark",e)},m=function(){l.hoverProvider&&a["languages"].registerHoverProvider(l.lang,l.hoverProvider),l.completionProvider&&a["languages"].registerCompletionItemProvider(l.lang,l.completionProvider)};m(),b();var v=function(){var e="monaco-".concat(l.id),t=document.getElementById(e);if(t){var o={value:l.modelValue||"",language:l.lang,readOnly:l.disabled,fontSize:13,automaticLayout:!0,scrollBeyondLastLine:!1,theme:g(),minimap:{enabled:!1},scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6,alwaysConsumeMouseWheel:!1}};p(),f=a["editor"].create(t,o),f.onDidChangeModelContent(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=f.getValue(),r!==f.modelValue&&(n("update:modelValue",r,t),n("change",r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c=f.getModel();c&&c.updateOptions({tabSize:2})}};return Object(o["onMounted"])((function(){v(),l.scrollLoading&&f.onDidScrollChange(l.scrollFunc)})),Object(o["onUnmounted"])((function(){var e;null===(e=f)||void 0===e||e.dispose()})),Object(o["watch"])((function(){return l.modelValue}),(function(e){e!==f.getValue()&&e&&f.setValue(e)})),Object(o["watch"])((function(){return l.completionProvider}),m),Object(o["watch"])((function(){return l.lang}),Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=f)||void 0===t||t.dispose(),e.next=3,Object(o["nextTick"])();case 3:v();case 4:case"end":return e.stop()}}),e)})))),function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:"monaco-".concat(e.id),class:"monaco-view"},null,8,u)}}});n("b70c");const d=s;t["a"]=d},b637:function(e,t,n){},b70c:function(e,t,n){"use strict";n("b637")},c133:function(e,t,n){},dd40:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},de52:function(e,t,n){"use strict";n("c133")},fbb3:function(e){e.exports=JSON.parse('{"base":"vs-dark","inherit":true,"rules":[{"foreground":"75715e","token":"comment"},{"foreground":"e6db74","token":"string"},{"foreground":"ae81ff","token":"constant.numeric"},{"foreground":"ae81ff","token":"constant.language"},{"foreground":"ae81ff","token":"constant.character"},{"foreground":"ae81ff","token":"constant.other"},{"foreground":"f92672","token":"keyword"},{"foreground":"f92672","token":"storage"},{"foreground":"66d9ef","fontStyle":"italic","token":"storage.type"},{"foreground":"a6e22e","fontStyle":"underline","token":"entity.name.class"},{"foreground":"a6e22e","fontStyle":"italic underline","token":"entity.other.inherited-class"},{"foreground":"a6e22e","token":"entity.name.function"},{"foreground":"fd971f","fontStyle":"italic","token":"variable.parameter"},{"foreground":"f92672","token":"entity.name.tag"},{"foreground":"a6e22e","token":"entity.other.attribute-name"},{"foreground":"66d9ef","token":"support.function"},{"foreground":"66d9ef","token":"support.constant"},{"foreground":"66d9ef","fontStyle":"italic","token":"support.type"},{"foreground":"66d9ef","fontStyle":"italic","token":"support.class"},{"foreground":"f8f8f0","background":"f92672","token":"invalid"},{"foreground":"f8f8f0","background":"ae81ff","token":"invalid.deprecated"},{"foreground":"cfcfc2","token":"meta.structure.dictionary.json string.quoted.double.json"},{"foreground":"75715e","token":"meta.diff"},{"foreground":"75715e","token":"meta.diff.header"},{"foreground":"f92672","token":"markup.deleted"},{"foreground":"a6e22e","token":"markup.inserted"},{"foreground":"e6db74","token":"markup.changed"},{"foreground":"ae81ffa0","token":"constant.numeric.line-number.find-in-files - match"},{"foreground":"e6db74","token":"entity.name.filename.find-in-files"}],"colors":{"editor.foreground":"#F8F8F2","editor.background":"#1b2028","editor.selectionBackground":"#232933","editor.lineHighlightBackground":"#232933","editorCursor.foreground":"#F8F8F0","editorWhitespace.foreground":"#3B3A32","editorIndentGuide.activeBackground":"#9D550FB0","editor.selectionHighlightBorder":"#222218"}}')}}]);