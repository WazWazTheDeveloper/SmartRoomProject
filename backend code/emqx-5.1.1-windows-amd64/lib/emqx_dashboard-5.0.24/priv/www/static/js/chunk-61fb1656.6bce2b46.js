(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61fb1656"],{"1f75":function(e,t,n){"use strict";var r=n("c964"),a=(n("96cf"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("caad"),n("2532"),n("ac1f"),n("00b4"),n("99af"),n("25f0"),n("bc3a")),c=n.n(a),o=n("2295"),u=n("f3f3"),i=(n("a9e3"),n("b6802"),n("159b"),n("3ef4")),l=n("e466"),s=n("2ef0"),f=n.n(s),p=25,d=function(e){var t=1e3*Number((e.length/p).toFixed(3));return t<3e3?3e3:t>8e3?8e3:t},b=function(e){var t=!e||Object(s["isString"])(e)||Object(s["isFunction"])(e)?{message:e}:e;return t},m=function(e){var t=b(e),n=t.message,r=t.duration,a=t.showClose,c=t.type,o=r||n&&d(n)||void 0,l=a||"error"===c;return Object(i["a"])(Object(u["a"])(Object(u["a"])({},e),{},{duration:o,showClose:l}))};l["d"].forEach((function(e){m[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=b(t);return m(Object(u["a"])(Object(u["a"])({},n),{},{type:e}))}}));var g=m,O=n("323e"),j=n.n(O),v=(n("a5d8"),n("afbc")),h=n("0613"),w=n("2fc2"),N="BAD_TOKEN",k="TOKEN_TIME_OUT",C="BAD_USERNAME_OR_PWD",x=n("88c3");j.a.configure({showSpinner:!1,trickleSpeed:200});var y=new Set,S=function(){return y=new Set};Object.assign(c.a.defaults,{baseURL:"api/v5",timeout:2e4}),c.a.interceptors.request.use((function(e){var t=h["a"].state.user;return e.headers={Authorization:"Bearer "+t.token},e}),(function(e){Promise.reject(e)})),c.a.interceptors.request.use(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.doNotTriggerProgress){e.next=4;break}return h["a"].state.request_queue||j.a.start(),e.next=4,h["a"].dispatch("SET_REQ_CHANGE",!0);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var _=function(e,t){return 401===e&&[N,k].includes(t.code)};function E(){return B.apply(this,arguments)}function B(){return B=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].dispatch("SET_REQ_CHANGE",!1);case 2:t=h["a"].state.request_queue,t>0?j.a.inc():j.a.done();case 4:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}c.a.interceptors.response.use((function(e){return e.config.doNotTriggerProgress||E(),/\/trace\/.+\/download/.test(e.config.url)?e:e.data||e.status}),(function(e){if(e.config.doNotTriggerProgress||E(),e.response){var t=e.response,n=t.data,r=t.status;if(!y.has(r)){var a;y.add(r);var c=401===r&&h["a"].state.afterCurrentUserPwdChanged;if(_(r,n))return c?h["a"].commit("SET_AFTER_CURRENT_USER_PWD_CHANGED",!1):o["a"].error(x["a"].global.t("Base.tokenExpiredMsg")),Object(v["c"])(),window.setTimeout(S,1e3),Promise.reject(e);var u=(null===(a=e.config)||void 0===a?void 0:a.errorsHandleCustom)&&Array.isArray(e.config.errorsHandleCustom)&&e.config.errorsHandleCustom.includes(r);if(!u)if((null===n||void 0===n?void 0:n.code)===C)o["a"].error(x["a"].global.t("Base.namePwdError"));else if(null!==n&&void 0!==n&&n.code||null!==n&&void 0!==n&&n.message){var i,l,s;g.error("".concat(r," ").concat(null!==(i=null===n||void 0===n?void 0:n.code)&&void 0!==i?i:"",": ").concat(null!==(l=null===n||void 0===n||null===(s=n.message)||void 0===s?void 0:s.toString())&&void 0!==l?l:""))}else g.error(r+" Network error");401===r&&Object(v["c"])()}}else{var p=e.code===w["C"]&&e.config.handleTimeoutSelf;y.has(0)||(p||g.error(x["a"].global.t("Base.networkError")),y.add(0))}return 0===h["a"].state.request_queue&&(y=new Set),f.a.throttle(S,2e3,{trailing:!1}),Promise.reject(e)}));t["a"]=c.a},3286:function(e,t,n){},"44ea":function(e,t,n){"use strict";var r=n("f3f3"),a=n("7a23"),c=function(e){return Object(a["pushScopeId"])("data-v-259d2746"),e=e(),Object(a["popScopeId"])(),e},o=c((function(){return Object(a["createElementVNode"])("i",{class:"iconfont icon-question"},null,-1)})),u=Object(a["defineComponent"])({name:"InfoTooltip"}),i=Object(a["defineComponent"])(Object(r["a"])(Object(r["a"])({},u),{},{props:{content:{type:String},popperClass:{type:String}},setup:function(e){var t=e,n=Object(a["computed"])((function(){return"info-tooltip ".concat(t.popperClass)}));return function(t,r){var c=Object(a["resolveComponent"])("el-tooltip");return Object(a["openBlock"])(),Object(a["createBlock"])(c,{effect:"dark","popper-class":Object(a["unref"])(n),placement:"top",content:e.content},Object(a["createSlots"])({default:Object(a["withCtx"])((function(){return[o]})),_:2},[t.$slots.content?{name:"content",fn:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(t.$slots,"content")]}))}:void 0]),1032,["popper-class","content"])}}})),l=(n("b63e"),n("f175"),n("6b0d")),s=n.n(l);const f=s()(i,[["__scopeId","data-v-259d2746"]]);t["a"]=f},"50a4":function(e,t,n){"use strict";var r=n("7a23"),a=function(){return{limit:20,count:0,page:1,hasnext:!1}};t["a"]=function(){var e=Object(r["ref"])(a()),t=Object(r["computed"])((function(){return{limit:e.value.limit,page:e.value.page}})),n=function(){e.value=a()},c=function(t){void 0===t.count?(e.value.count=-1,e.value.hasnext=t.hasnext):e.value.count=t.count,e.value.page=t.page};return{pageMeta:e,pageParams:t,initPageMeta:n,setPageMeta:c}}},"583f":function(e,t,n){"use strict";var r=n("7a23"),a=(n("a9e3"),Object(r["defineComponent"])({props:{currentPage:{type:Number,required:!0},hasnext:{type:Boolean,required:!0}},emits:["current-change"],setup:function(e,t){var n=t.emit,a=e,c=Object(r["computed"])((function(){return a.hasnext?a.currentPage+1:a.currentPage})),o=function(e){n("current-change",e)};return function(t,n){var a=Object(r["resolveComponent"])("el-pagination");return Object(r["openBlock"])(),Object(r["createBlock"])(a,{background:"",layout:"prev, next","current-page":e.currentPage,"page-count":Object(r["unref"])(c),onCurrentChange:o},null,8,["current-page","page-count"])}}}));const c=a;var o=c,u={class:"common-pagination"},i=Object(r["defineComponent"])({props:{metaData:{type:Object,required:!0,default:function(){return{}}}},emits:["loadPage","update:metaData"],setup:function(e,t){var n,a,c=t.emit,i=e,l=Object(r["computed"])((function(){return i.metaData}));(n=l.value).limit||(n.limit=20),(a=l.value).page||(a.page=1);var s=[20,50,100,500];Object(r["watch"])(l,(function(e){c("update:metaData",e)}));var f=function(e){l.value.page=1,c("loadPage",{page:l.value.page,limit:e})},p=function(e){l.value.page!==e&&(l.value.page=e),c("loadPage",{page:e,limit:l.value.limit})};return function(e,t){var n=Object(r["resolveComponent"])("el-pagination");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",u,[Object(r["unref"])(l).count&&Object(r["unref"])(l).count>s[0]?(Object(r["openBlock"])(),Object(r["createBlock"])(n,{key:0,background:"",layout:"total, sizes, prev, pager, next","page-sizes":s,"page-size":Object(r["unref"])(l).limit,"onUpdate:page-size":t[0]||(t[0]=function(e){return Object(r["unref"])(l).limit=e}),"current-page":Object(r["unref"])(l).page,"onUpdate:current-page":t[1]||(t[1]=function(e){return Object(r["unref"])(l).page=e}),total:Object(r["unref"])(l).count,onSizeChange:f,onCurrentChange:p},null,8,["page-size","current-page","total"])):-1===Object(r["unref"])(l).count?(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:1,"current-page":Object(r["unref"])(l).page,hasnext:Object(r["unref"])(l).hasnext,onCurrentChange:p},null,8,["current-page","hasnext"])):Object(r["createCommentVNode"])("",!0)])}}});const l=i;t["a"]=l},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n}},"8bc7":function(e,t,n){},9129:function(e,t,n){var r=n("23e7");r({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},"9d39":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("99af");var r=n("47e2");function a(e){var t=Object(r["b"])(),n=t.t,a=function(t,r){return r?n("".concat(e,".").concat(t),r):n("".concat(e,".").concat(t))};return{t:n,tl:a}}},"9ee5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n}},b06c:function(e,t,n){"use strict";var r,a=n("fc11"),c=(n("d81d"),n("fb6a"),n("d3b7"),n("9129"),n("a9e3"),n("c740"),n("99af"),n("498a"),n("ca5a")),o=n("9d39"),u=[c["I"].Millisecond,c["I"].Second,c["I"].Minute,c["I"].Hour,c["I"].Day],i=(r={},Object(a["a"])(r,c["I"].Millisecond,1e3),Object(a["a"])(r,c["I"].Second,60),Object(a["a"])(r,c["I"].Minute,60),Object(a["a"])(r,c["I"].Hour,24),r),l=function(e){return u.slice(e,-1).map((function(t,n){for(var r=i[u[e]],a=e+1;a<u.length-1-n;a++)r*=i[u[a]];return r}))};t["a"]=function(){var e,t=Object(o["a"])("General"),n=t.t,r=(e={},Object(a["a"])(e,c["I"].Millisecond,"General.ms"),Object(a["a"])(e,c["I"].Second,"General.sec"),Object(a["a"])(e,c["I"].Minute,"General.min"),Object(a["a"])(e,c["I"].Hour,"General.hour"),Object(a["a"])(e,c["I"].Day,"General.day"),e),i=function(e,t){if(void 0===t||!u.some((function(e){return e===t}))||Number.isNaN(Number(e))||0===Number(e))return e;for(var a=Number(e),c=u.findIndex((function(e){return e===t})),o=l(c),i=u.slice(c).reverse(),s="",f=a,p=0;p<o.length;p++){var d=Math.floor(f/o[p]);d>=1&&(s+=" ".concat(d," ").concat(n(r[i[p]],d)),f-=d*o[p])}return 0!==f&&(s+=" ".concat(f," ").concat(n(r[i[i.length-1]],f))),s.trim()},s=function(e){return i(Math.floor(e/1e3),c["I"].Second)},f=function(e){return i(e,c["I"].Second)};return{getDurationStr:i,transMsNumToSimpleStr:s,transSecondNumToSimpleStr:f}}},b63e:function(e,t,n){"use strict";n("8bc7")},b66b:function(e,t,n){"use strict";n.r(t);var r=n("c964"),a=n("f3f3"),c=(n("b64b"),n("96cf"),n("7a23")),o=n("f727"),u=n("4c61"),i=n("583f"),l=n("44ea"),s=n("9ee5");const f=Object(c["defineComponent"])({name:"Remove"}),p={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},d=Object(c["createElementVNode"])("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),b=Object(c["createElementVNode"])("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),m=[d,b];function g(e,t,n,r,a,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("svg",p,m)}var O=Object(s["a"])(f,[["render",g]]),j=n("c9a1"),v=n("3ef4"),h=n("b06c"),w=n("50a4"),N=n("47e2"),k={class:"alarm app-wrapper"},C={class:"section-header"},x=Object(c["createElementVNode"])("div",null,null,-1),y={class:"message-with-icon"},S=Object(c["createElementVNode"])("br",null,null,-1),_={class:"emq-table-footer"},E=Object(c["defineComponent"])({name:"currentAlarm"}),B=Object(c["defineComponent"])(Object(a["a"])(Object(a["a"])({},E),{},{setup:function(e){var t=Object(c["ref"])(!1),n=Object(c["ref"])([]),s=Object(N["b"])(),f=s.t,p=Object(w["a"])(),d=p.pageMeta,b=p.pageParams,m=p.initPageMeta,g=p.setPageMeta,E=Object(h["a"])(),B=E.transMsNumToSimpleStr,R=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var r,c,u,i,l,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.value=!0,c=Object(a["a"])(Object(a["a"])({},b.value),r),e.prev=3,e.next=6,Object(o["e"])(!0,c);case 6:u=e.sent,i=u.data,l=u.meta,n.value=i,g(l),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),n.value=[],m();case 17:return e.prev=17,t.value=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j["a"].confirm(f("Alarm.clearConfirm"),{confirmButtonText:f("Base.confirm"),cancelButtonText:f("Base.cancel"),confirmButtonClass:"confirm-danger",type:"warning"});case 3:return e.next=5,Object(o["a"])().catch((function(){}));case 5:t=e.sent,t&&(v["a"].success(f("Alarm.clearSuccess")),R()),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return R(),function(e,r){var a=Object(c["resolveComponent"])("el-button"),o=Object(c["resolveComponent"])("el-table-column"),s=Object(c["resolveComponent"])("el-table"),f=Object(c["resolveDirective"])("loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[Object(c["createElementVNode"])("div",C,[x,Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(a,{type:"danger",plain:"",icon:Object(c["unref"])(O),onClick:P,disabled:!n.value.length},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("Alarm.clearHistory")),1)]})),_:1},8,["icon","disabled"])])]),Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(s,{data:n.value},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{prop:"name",label:e.$t("Alarm.alarmName")},null,8,["label"]),Object(c["createVNode"])(o,{label:e.$t("Alarm.alarmMsg")},{default:Object(c["withCtx"])((function(e){var t=e.row;return[Object(c["createElementVNode"])("div",y,[Object.keys(t.details).length?(Object(c["openBlock"])(),Object(c["createBlock"])(l["a"],{key:0},{content:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:t},Object(c["toDisplayString"])(t)+": "+Object(c["toDisplayString"])(e),1)})),128))]})),_:2},1024)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(t.message),1)])]})),_:1},8,["label"]),Object(c["createVNode"])(o,{prop:"node",label:e.$t("Alarm.triggerNode")},null,8,["label"]),Object(c["createVNode"])(o,{label:e.$t("Alarm.alarmLevel")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.$t("Alarm.system")),1)]})),_:1},8,["label"]),Object(c["createVNode"])(o,{prop:"activate_at",label:e.$t("Alarm.activateTime")},{default:Object(c["withCtx"])((function(e){var t=e.row;return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.activate_at&&Object(c["unref"])(u["l"])(t.activate_at)),1),S,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.deactivate_at&&Object(c["unref"])(u["l"])(t.deactivate_at)),1)]})),_:1},8,["label"]),Object(c["createVNode"])(o,{prop:"deactivate_at",label:e.$t("Alarm.duration")},{default:Object(c["withCtx"])((function(e){var t=e.row;return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Object(c["unref"])(B)(t.duration)),1)]})),_:1},8,["label"])]})),_:1},8,["data"])),[[f,t.value,void 0,{lock:!0}]]),Object(c["createElementVNode"])("div",_,[Object(c["createVNode"])(i["a"],{metaData:Object(c["unref"])(d),"onUpdate:metaData":r[0]||(r[0]=function(e){return Object(c["isRef"])(d)?d.value=e:null}),onLoadPage:R},null,8,["metaData"])])])}}}));n("d7dd");const R=B;t["default"]=R},b6b2:function(e,t,n){},d7dd:function(e,t,n){"use strict";n("3286")},f175:function(e,t,n){"use strict";n("b6b2")},f727:function(e,t,n){"use strict";n.d(t,"m",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"n",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return g})),n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return k}));var r=n("f3f3"),a=n("c964"),c=(n("96cf"),n("1f75"));function o(e){return c["a"].post("/login",e)}function u(e){return c["a"].get("/metrics",{params:{aggregate:e}})}function i(){return c["a"].get("/monitor_current",{doNotTriggerProgress:!0})}function l(e){return c["a"].get("/monitor",{params:{latest:e}})}function s(){return c["a"].get("/prometheus")}function f(e){return c["a"].put("/prometheus",e)}function p(){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1&&void 0!==r[1]?r[1]:2e4,e.abrupt("return",c["a"].get("/nodes",{doNotTriggerProgress:t,timeout:n}));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c["a"].get("/nodes/".concat(encodeURIComponent(t))));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function g(){return c["a"].get("/stats",{doNotTriggerProgress:!0})}function O(e){return c["a"].get("/nodes/".concat(encodeURIComponent(e),"/stats"))}function j(){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",c["a"].get("/alarms",{params:Object(r["a"])({activated:String(!t)},n)}));case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function h(){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c["a"].delete("/alarms"));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.topic=e.topic||void 0,c["a"].get("/topics",{params:e})};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("/subscriptions",{params:e})}}}]);